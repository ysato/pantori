# パントリーMVP 要件定義書

## 核心価値

**「登録したアイテムの残数が閾値を下回っているものを一覧として確認できること」**

これにより、買い物時の効率化を実現し、必要なものの買い忘れを防ぎ、家庭の在庫管理を支援する。

## ユーザストーリー

### ストーリー1: パントリー管理

- **として** 家庭で在庫管理を行うユーザー
- **私は** 自分専用のパントリーを作成・削除したい  
- **そうすることで** 家庭の食材・日用品の在庫状況を整理して管理できる

### ストーリー2: アイテム登録

- **として** パントリーのオーナー
- **私は** パントリーにアイテムを登録・編集・削除したい
- **そうすることで** 管理したい商品の情報を蓄積できる

### ストーリー3: 在庫数管理

- **として** パントリーのオーナー
- **私は** 各アイテムの現在の残数と最低限保持したい閾値を設定・更新したい
- **そうすることで** いつ補充が必要かを数値で管理できる

### ストーリー4: 買い物支援

- **として** パントリーのオーナー
- **私は** 残数が閾値を下回っているアイテムを一覧で確認したい
- **そうすることで** 買い物時に何を購入すべきかが一目でわかり、買い忘れを防げる

## 機能要件（EARS記法）

### 通常要件

- REQ-001: システムはユーザーがパントリーを作成できなければならない
- REQ-002: システムはパントリー作成時に作成者をオーナーとして設定しなければならない  
- REQ-003: システムはパントリーのオーナーがパントリーを削除できなければならない
- REQ-004: システムはパントリーのオーナーがアイテムを登録できなければならない
- REQ-005: システムはパントリーのオーナーがアイテム情報を編集できなければならない
- REQ-006: システムはパントリーのオーナーがアイテムを削除できなければならない
- REQ-007: システムはアイテムの現在残数を管理できなければならない
- REQ-008: システムはアイテムの閾値を管理できなければならない
- REQ-009: システムは残数が閾値を下回るアイテムの一覧を表示できなければならない

### 条件付き要件

- REQ-101: パントリーが削除される場合、システムはパントリーのオーナー情報も同時に削除しなければならない
- REQ-102: 残数が閾値以下の場合、システムはそのアイテムを「補充が必要なアイテム」として識別しなければならない
- REQ-103: アイテムが削除される場合、システムは関連する残数・閾値情報も同時に削除しなければならない
- REQ-104: オーナー以外のユーザーがアクセスを試みる場合、システムはアクセスを拒否しなければならない

### 制約要件

- REQ-401: システムは残数と閾値を整数部7桁・小数点以下第2位まで（9999999.99形式）で管理しなければならない
- REQ-402: システムはMVPにおいてパントリーへのアクセスをオーナーのみに制限しなければならない

## 非機能要件

### パフォーマンス

- NFR-001: システムはアイテム一覧表示を3秒以内に完了しなければならない
- NFR-002: システムは残数不足アイテム一覧を2秒以内に表示しなければならない

### セキュリティ

- NFR-101: システムはパントリーオーナー以外のアクセスを適切に制御しなければならない
- NFR-102: システムはユーザーデータを適切に保護しなければならない

### ユーザビリティ

- NFR-201: システムは直感的な操作でアイテムの登録・編集ができなければならない
- NFR-202: システムは残数不足アイテムを視覚的に分かりやすく表示しなければならない

### 可用性

- NFR-301: システムは一般家庭での日常利用に支障のない可用性を提供しなければならない

### 拡張性

- NFR-401: システムは将来的な複数人での同時アクセス・編集機能追加に対応可能な設計とする

## Edgeケース

### エラー処理

- EDGE-001: 無効な数値（負の値、形式外の値）が入力された場合の処理
- EDGE-002: 存在しないパントリーやアイテムにアクセスしようとした場合の処理
- EDGE-003: 権限のないユーザーがアクセスを試みた場合の処理
- EDGE-004: システムエラーが発生した場合の適切なエラーメッセージ表示

### 境界値

- EDGE-101: 残数・閾値の最大値（9999999.99）での動作確認
- EDGE-102: 残数・閾値の最小値（0.00）での動作確認
- EDGE-103: 残数と閾値が同じ値の場合の補充判定
- EDGE-104: パントリーにアイテムが0件の場合の一覧表示

### データ整合性

- EDGE-201: パントリー削除時のオーナー情報削除の整合性確保
- EDGE-202: アイテム削除時の残数・閾値データ削除の整合性確保

## 受け入れ基準

### 機能テスト

- [ ] パントリーの作成・削除ができる
- [ ] パントリー作成時にオーナーが適切に設定される
- [ ] パントリー削除時にオーナーも削除される
- [ ] オーナーのみがパントリーにアクセスできる
- [ ] アイテムの登録・編集・削除ができる
- [ ] 残数・閾値を9999999.99形式で管理できる
- [ ] 残数が閾値以下のアイテムが一覧表示される
- [ ] アイテムが0件でも適切に画面表示される

### 非機能テスト

- [ ] アイテム一覧表示が3秒以内に完了する
- [ ] 残数不足一覧が2秒以内に表示される
- [ ] 権限のないユーザーのアクセスが適切に拒否される
- [ ] 無効な数値入力に対して適切なエラーメッセージが表示される
- [ ] システムエラー時に適切なエラーハンドリングがなされる

### ユーザビリティテスト

- [ ] 直感的な操作でアイテム管理ができる
- [ ] 残数不足アイテムが視覚的に分かりやすく表示される
- [ ] エラーメッセージが理解しやすい内容で表示される

## 除外項目

- 複数人での同時アクセス・編集機能
- アイテムのカテゴリ分類機能
- 購入履歴機能
- アイテム画像管理機能
